{% set locale = salt['grains.filter_by']({
  'default': {
    'preferred': 'en_US.UTF-8'
  }
}, merge=salt['pillar.get']('locale:lookup'), base='default') %}

{% set ssh = salt['grains.filter_by']({
  'default': {
    'package': 'openssh-server',
    'service': 'sshd',
    'config': '/etc/ssh/sshd_config',
  },
  'Ubuntu': {
    'service': 'ssh'
  }
}, merge=salt['pillar.get']('ssh:lookup'), base='default', grain='os') %}

{% set docker = salt['grains.filter_by']({
  'default': {
    'repo_file': '/etc/apt/sources.list.d/docker.list',
    'repo_keyid': '58118E89F3A912897C070ADBF76221572C52609D',
    'repo_keyserver': 'hkp://p80.pool.sks-keyservers.net:80'
  },
  'jessie': {
    'repo_entry': 'deb https://apt.dockerproject.org/repo debian-jessie main',
  },
  'trusty': {
    'repo_entry': 'deb https://apt.dockerproject.org/repo ubuntu-trusty main',
  }
}, merge=salt['pillar.get']('ssh:lookup'), base='default', grain='oscodename') %}