{% set locale = salt['grains.filter_by']({
  'default': {
    'preferred': 'en_US.UTF-8 UTF-8'
  }
}, merge=salt['pillar.get']('locale:lookup'), base='default') %}

{% set ssh = salt['grains.filter_by']({
  'default': {
    'package': 'openssh-server',
    'service': 'sshd',
    'config': '/etc/ssh/sshd_config',
    'port': 22
  },
  'Ubuntu': {
    'service': 'ssh'
  }
}, merge=salt['pillar.get']('ssh:lookup'), base='default', grain='os') %}

{% set docker = salt['grains.filter_by']({
  'default': {
    'package': 'docker-engine',
    'repo': {
      'file': '/etc/apt/sources.list.d/docker.list',
      'keyid': '58118E89F3A912897C070ADBF76221572C52609D',
      'keyserver': 'hkp://p80.pool.sks-keyservers.net:80'
    }
  },
  'jessie': {
    'repo_entry': 'deb https://apt.dockerproject.org/repo debian-jessie main',
  },
  'trusty': {
    'repo_entry': 'deb https://apt.dockerproject.org/repo ubuntu-trusty main',
  },
  'CentOS Linux 7 (Core)': {
    'package': 'docker',
    'repo': None
  }
}, merge=salt['pillar.get']('ssh:lookup'), base='default', grain='oscodename') %}

{% set user = salt['grains.filter_by']({
  'default': {
    'username': 'alex',
    'fullname': 'Alex Recker',
    'email': 'alex@reckerfamily.com',
    'groups': ['sudo', 'docker'],
    'shell': '/bin/bash',
    'ssh': [
      'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQD/J98LsMpGwuNA/U3jpqOB0YcD8TNO5CSYZmFm7liDWT2Ndw6uOt3wEQx7LcYh1aDeI6XsHkqNSUoMbgVmFQ10KzEWTd/F+JIE/2aQ5uowJ5/DynobXEgAt/c7FqlnCWWK4u4MbAc5oFLn2sc/eeg1FbQP8EnYJ+8Qi0T/ny9gSLHun8oSAI2Ae74iKnPYyEqozZZf46LToR30W3C/6w0kN6k7H9M3IgrZxWuvRZTsQIvl8meo0YxItTR7HDiqSMav5ZXah6mT7OHhCTN0LIReOPsQu2j4Dc96cfWaIfoSTwQtsx/Teoc/BjhNfawj+YwjRk6li36QUw8xjtGauCLivqrDiB2omFrqY3X15JgMQQkSxiRO4TMFjJSKX52vh9YR5P62uuYyZMqzBvn7QfWG4qQWkPkivX3f3TpIGwmF68Adyaz1+bkFnFRcgytGM960w7RVUp2s98ndoqeRK2av6UJvutqXvPyCbKJvHKUIjQ3UivwwienSTuTXDUYT3hjruz1umwMAcRqqadHaNOBViPT7dvg5t+ruCeJedjtdhXRvsiKiFucq8fxzev46jMD/zCq4hlQUV5Uk8cYYT8dius3TojUddgaEV3by29B5h4/6sVjC/MVCIHu4r+qup2a4X9PL+lrVDQyjD0tdHfBI86FBwUV/EuiFxzrvaCGJQw== alex@lappy-486',
      'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDBNbTnoGsJ27oB1U+6BQnkZEmBggKItCsMyCEJV7oaSoKvskWdgmJddcPF+ANWSDhYuku1C2CgCHC+sJFLDvlL3Uj2bfZPmojavWT2AXqiYAKMsTKHMG6z7lFJEwIvUg7RoMKs2dqHXdvzHy6U1SYSl6fsoWNpJzIRySRJoBh9Yud8gejgLof1M2nyG745mSoNBDp3lv3Zhz38q6XW3LGk8djPRM7BACraKMS2Vas/3+T3w4zfjJCLR0WgIg6NYNoCw+0MWizohAbMM80F8pCqGQDDx1n1grkaHfMZ30IRnHOH7ktuJKWtzDKknJIouLX4N2FqhJkQaXqw0kqkD+P5UIJTjP/0+94ONuQY76ZvnQu3WXtw8GC9cCFrbpB39J5YwxIlMTrbFWuZF4quAm7h0Rd35osrNcMkrS06Vw04b0G984SmHGNhIFhMVz+YafXiVZ20QR3+sixy0DSVQgJsHyUDfQ/XqfiG5LZM9CHLTe3+tRkKLNXKce20ZtSjpOdcrXjjUUb9PwN1ZZaV5JunY99ee8+0UPfD8Qit/JS8wVeZdnSDjFxCPTe9TLzNgrTFhwEOYp1IAYj0R8FY8Ex1cm7kuA1O7bS6bpfjKYH+C9WX+i7aOHQzEu/ECwPbgvqXon5C7iyI03hge8Fs0s6OO1VxLH8pD9asC06t2HCLyw== arecker@zendesk.com'
    ]
  },
  'CentOS Linux 7 (Core)': {
    'groups': ['wheel', 'docker']
  }
}, merge=salt['pillar.get']('user:lookup'), base='default', grain='oscodename') %}

{% set nginx = salt['grains.filter_by']({
  'default': {
    'package': 'nginx',
    'webroot': '/usr/share/nginx/'
  },
  'jessie': {
    'webroot': '/var/www/'
  },
}, merge=salt['pillar.get']('nginx:lookup'), base='default', grain='oscodename') %}

{% set certbot = salt['grains.filter_by']({
  'default': {
    'ppa': None,
    'repo': None,
    'package': 'certbot',
  },
  'jessie': {
    'repo': {
      'entry': 'deb http://ftp.debian.org/debian jessie-backports main',
      'file': '/etc/apt/sources.list.d/backports.list',
    }
  },
  'trusty': {
    'ppa': 'certbot/certbot'
  },
}, merge=salt['pillar.get']('certbot:lookup'), base='default', grain='oscodename') %}

{% set python = salt['grains.filter_by']({
  'default': {
    'pip_packages': [
      'awscli',
      'boto3',
      'cloudflare',
      'docker-compose',
      'pyopenssl',
      'requests'
    ],
    'pkgs_install': [
      'python',
      'python-dev',
      'python-setuptools'
    ],
    'pkgs_remove': [
      'python-pip',
      'python-pip-whl'
    ],
    'pip_version': '9.0.1'
  },
  'CentOS Linux 7 (Core)': {

  }
}, merge=salt['pillar.get']('python:lookup'), base='default', grain='oscodename') %}

